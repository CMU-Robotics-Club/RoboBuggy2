<?xml version="1.0"?>
<robot name="buggy" xmlns:xacro="http://ros.org/wiki/xacro">

<xacro:macro name="buggy_whole" params="num">
  <link name="chassis">
    <inertial>
      <mass value="34.0" />
      <inertia ixx="18.58" ixy="0.0" ixz="0.0" iyy="3.093" iyz="0.0" izz="15.543" />
        <!-- for a box: ixx = 0.083 * mass * (y*y + z*z) -->
        <!-- for a box: ixy = 0 -->
        <!-- for a box: ixz = 0 -->
        <!-- for a box: iyy = 0.083 * mass * (x*x + z*z) -->
        <!-- for a box: iyz = 0 -->
        <!-- for a box: izz = 0.083 * mass * (x*x + y*y) -->
    </inertial>
    <collision name="collision">
      <pose xyz="0.16 0.0 0.54" rpy="0.0 0.0 0.0" />
      <geometry>
        <box size="0.24 0.29 1.84" />
      </geometry>
    </collision>
    <visual name="frame_visual">
      <geometry>
        <mesh filename="model://buggy/buggy.dae" submesh="frame" />
      </geometry>
    </visual>
    <visual name="shell_visual">
      <geometry>
        <mesh filename="model://buggy/buggy.dae" submesh="shell" />
      </geometry>
    </visual>
  </link>
  <link name="left_wheel">
    <pose xyz="0.0857 -0.301 -0.0159" rpy="0.0 0.0 0.0" />
    <collision name="collision">
      <pose xyz="0.0 0.0 0.0" rpy="-1.57079633 0.0 0.0" />
      <geometry>
        <cylinder length="0.03" radius="0.09" />
      </geometry>
    </collision>
    <visual name="visual">
      <geometry>
        <mesh filename="model://buggy/buggy.dae" submesh="leftwheel" center="true" />
      </geometry>
    </visual>
  </link>
  <link name="right_wheel">
    <pose xyz="0.0857 0.301 -0.0159" rpy="0.0 0.0 0.0" />
    <collision name="collision">
      <pose xyz="0.0 0.0 0.0" rpy="-1.57079633 0.0 0.0" />
      <geometry>
        <cylinder length="0.03" radius="0.09" />
      </geometry>
    </collision>
    <visual name="visual">
      <geometry>
        <mesh filename="model://buggy/buggy.dae" submesh="rightwheel" center="true" />
      </geometry>
    </visual>
  </link>
  <link name="front_wheel">
    <pose xyz="0.0789 0 1.18" rpy="0.01 0.0 0.0" />
    <collision name="collision">
      <pose xyz="0.0 0.0 0.0" rpy="-1.57079633 0.0 0.0" />
      <geometry>
        <cylinder length="0.03" radius="0.09" />
      </geometry>
    </collision>
    <visual name="visual">
      <geometry>
        <mesh filename="model://buggy/buggy.dae" submesh="frontwheel" center="true"/>
      </geometry>
    </visual>
  </link>
  <link name="front_wheel_steer_pin">
    <pose xyz="0.0789 0 1.18" rpy="0.01 0.0 0.0" />
    <collision name="collision">
      <pose xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      <geometry>
        <cylinder length="0.09" radius="0.03" />
      </geometry>
    </collision>
    <visual name="visual">
      <geometry>
        <cylinder length="0.09" radius="0.03" />
      </geometry>
    </visual>
  </link>
  <joint type="continuous" name="left_wheel_hinge">
    <pose xyz="0 0 0" rpy="0 0 0" />
    <child link="left_wheel" />
    <parent link="chassis" />
    <axis xyz="0 1 0" />
  </joint>
  <joint type="continuous" name="right_wheel_hinge">
    <pose xyz="0 0 0" rpy="0 0 0" />
    <child link="right_wheel" />
    <parent link="chassis" />
    <axis xyz="0 1 0" />
  </joint>
  <joint type="continuous" name="front_wheel_hinge">
    <pose xyz="0 0 0" rpy="0 0 0" />
    <child link="front_wheel_steer_pin" />
    <parent link="chassis" />
    <axis xyz="0 1 0" />
  </joint>
  <joint type="revolute" name="front_wheel_steer">
    <pose xyz="0 0 0" rpy="0 0 0" />
    <child link="front_wheel" />
    <parent link="front_wheel_steer_pin" />
    <axis xyz="0 0 1" />
    <limit effort="5.0" lower="-1.57" upper="1.57" velocity="2.208932"/>
  </joint>

  <transmission name="front_wheel_steer_trans">
    <type>transmission_interface/SimpleTranmission</type>
    <actuator name="front_wheel_steer_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="front_wheel_steer">
      <hardwareInterface>PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>
  <transmission name="front_wheel_hinge_trans">
    <type>transmission_interface/SimpleTranmission</type>
    <actuator name="front_wheel_hinge_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="front_wheel_hinge">
      <hardwareInterface>PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>
  <transmission name="left_wheel_hinge_trans">
    <type>transmission_interface/SimpleTranmission</type>
    <actuator name="left_wheel_hinge_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="left_wheel_hinge">
      <hardwareInterface>PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>
  <transmission name="right_wheel_hinge_trans">
    <type>transmission_interface/SimpleTranmission</type>
    <actuator name="right_wheel_hinge_actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="right_wheel_hinge">
      <hardwareInterface>PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>
</xacro:macro>

<xacro:buggy_whole num="0"/>

</robot>